{"version":3,"file":"vue-form.js","sources":["../src/config.js","../src/components/form-errors.js","../src/components/form-error.js","../src/validators.js","../src/components/vue-form.js","../src/util.js","../src/directives/vue-form-validator.js","../src/components/validate.js","../src/main.js"],"sourcesContent":["export const config = {\r\n    formComponent: 'vueForm',\r\n    errorComponent: 'formError',\r\n    errorsComponent: 'formErrors',\r\n    validateComponent: 'validate',\r\n    errorTag: 'span',\r\n    errorsTag: 'div',\r\n    dirtyClass: 'vf-dirty',\r\n    pristineClass: 'vf-pristine',\r\n    validClass: 'vf-valid',\r\n    invalidClass: 'vf-invalid',\r\n    submittedClass: 'vf-submitted',\r\n    touchedClass: 'vf-touched',\r\n    untouchedClass: 'vf-untouched'\r\n};\r\n","import { config } from '../config';\r\n\r\nexport default {\r\n  name: '',\r\n  render(h) {\r\n    const children = [];\r\n    const field = this.formstate[this.field];\r\n    if (field && field.$error) {\r\n      Object.keys(field.$error).forEach((key) => {\r\n        children.push(this.$slots[key]);\r\n      });\r\n    }\r\n    return h(this.tag, children);\r\n  },\r\n  props: {\r\n    state: Object,\r\n    field: String,\r\n    tag: {\r\n      type: String,\r\n      default: config.errorsTag\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      formstate: {}\r\n    };\r\n  },\r\n  created () {\r\n    this.formstate = this.state || this.$parent.state;\r\n  }\r\n};\r\n","import { config } from '../config';\r\n\r\nexport default {\r\n  render(h) {\r\n    const field = this.formstate[this.field];\r\n    if (field && field.$error[this.error]) {\r\n      return h(this.tag, [this.$slots.default]);\r\n    }\r\n  },\r\n  props: {\r\n    state: Object,\r\n    field: String,\r\n    error: String,\r\n    tag: {\r\n      type: String,\r\n      default: config.errorTag\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      formstate: {}\r\n    };\r\n  },\r\n  created () {\r\n    this.formstate = this.state || this.$parent.state;\r\n  }\r\n}\r\n","const emailRegExp = /^[a-z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i; // from angular\r\nconst urlRegExp = /^(http\\:\\/\\/|https\\:\\/\\/)(.{4,})$/;\r\n\r\nexport const validators = {\r\n /*   'type[email]' (model, value, vnode) {\r\n        return emailRegExp.test(model);\r\n    },\r\n    'type[number]' (model) {\r\n        return !isNaN(model);\r\n    },\r\n    'type[url]' (model) {\r\n        return urlRegExp.test(model);\r\n    },*/\r\n\r\n    email (model, value, vnode) {\r\n        return emailRegExp.test(model);\r\n    },\r\n    number (model) {\r\n        return !isNaN(model);\r\n    },\r\n    url (model) {\r\n        return urlRegExp.test(model);\r\n    },\r\n    required (model, value, vnode) {\r\n        if(value === false) {\r\n            return true;\r\n        }\r\n\r\n        if (Array.isArray(model)) {\r\n            return !!model.length;\r\n        }\r\n        return !!model;\r\n    },\r\n    minlength (model, length) {\r\n        return model.length >= length;\r\n    },\r\n    maxlength (model, length) {\r\n        return length >= model.length;\r\n    },\r\n    pattern (model, pattern) {\r\n        const patternRegExp = new RegExp('^' + pattern + '$');\r\n        return patternRegExp.test(model);\r\n    },\r\n    min (model, min) {\r\n        return model * 1 >= min * 1;\r\n    },\r\n    max (model, max) {\r\n        return max * 1 >= model * 1;\r\n    }\r\n};","import { config } from '../config';\r\nimport { validators } from '../validators';\r\n\r\nexport default {\r\n  render(h) {\r\n    return h(\r\n      'form', {\r\n        on: {\r\n          submit: (event) => {\r\n            this.$emit('submit', event);\r\n          }\r\n        },\r\n        attrs: {\r\n          'novalidate': '',\r\n          'class': this.className\r\n        }\r\n      }, [this.$slots.default]\r\n    );\r\n  },\r\n  props: {\r\n    value: Object,\r\n    state: Object\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  created() {\r\n    const controls = {};\r\n    const state = this.state;\r\n    const formstate = {\r\n      $dirty: false,\r\n      $pristine: true,\r\n      $valid: true,\r\n      $invalid: false,\r\n      $submitted: false,\r\n      $touched: false,\r\n      $untouched: true,\r\n      $error: {},\r\n      _addControl: (ctrl) => {\r\n        controls[ctrl.$name] = ctrl;\r\n        this.$set(state, ctrl.$name, ctrl);\r\n      },\r\n      _removeControl: (ctrl) => {\r\n        delete controls[ctrl.$name];\r\n        this.$delete(this.state, ctrl.$name);\r\n        this.$delete(this.state.$error, ctrl.$name);\r\n      }\r\n    }\r\n\r\n    Object.keys(formstate).forEach((key) => {\r\n      this.$set(this.state, key, formstate[key]);\r\n    });\r\n\r\n    this.$watch('state', () => {\r\n      let isDirty = false;\r\n      let isValid = true;\r\n      let isTouched = false;\r\n      Object.keys(controls).forEach((key) => {\r\n        const control = controls[key];\r\n        if (control.$dirty) {\r\n          isDirty = true;\r\n        }\r\n        if (control.$touched) {\r\n          isTouched = true;\r\n        }\r\n        if (!control.$valid) {\r\n          isValid = false;\r\n          // add control to errors\r\n          this.$set(state.$error, control.$name, control);\r\n        } else {\r\n          this.$delete(state.$error, control.$name);\r\n        }\r\n      });\r\n\r\n      state.$dirty = isDirty;\r\n      state.$pristine = !isDirty;\r\n      state.$touched = isTouched;\r\n      state.$untouched = !isTouched;\r\n      state.$valid = isValid;\r\n      state.$invalid = !isValid;\r\n\r\n    }, {\r\n      deep: true,\r\n      immediate: true\r\n    });\r\n\r\n    /* watch pristine? if set to true, set all children to pristine\r\n    Object.keys(controls).forEach((ctrl) => {\r\n      controls[ctrl].setPristine();\r\n    });*/\r\n\r\n  },\r\n  computed: {\r\n    className() {\r\n      const out = [];\r\n      if (this.state.$dirty) {\r\n        out.push(config.dirtyClass);\r\n      } else {\r\n        out.push(config.pristineClass)\r\n      }\r\n      if (this.state.$valid) {\r\n        out.push(config.validClass);\r\n      } else {\r\n        out.push(config.invalidClass)\r\n      }\r\n      if (this.state.$touched) {\r\n        out.push(config.touchedClass);\r\n      } else {\r\n        out.push(config.untouchedClass)\r\n      }\r\n      return out.join(' ');\r\n    }\r\n  }\r\n}\r\n","export function addClass(el, className) {\r\n    if (el.classList) {\r\n        el.classList.add(className);\r\n    } else {\r\n        el.className += ' ' + className;\r\n    }\r\n}\r\n\r\nexport function removeClass(el, className) {\r\n    if (el.classList) {\r\n        el.classList.remove(className);\r\n    } else {\r\n        el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\r\n    }\r\n}\r\n\r\nexport function removeClassWithPrefix(el, prefix) {\r\n    var classes = el.className.split(\" \").filter(function (c) {\r\n        return c.lastIndexOf(prefix, 0) !== 0;\r\n    });\r\n    el.className = (classes.join(\" \")).trim();\r\n}\r\n\r\nexport function vModelValue(data) {\r\n  return data.directives.filter(v => v.name === 'model')[0].value;\r\n}\r\n\r\nexport function getVModelNode(nodes) {\r\n  let foundVnode;\r\n  const vModelNode = nodes.filter((node) => {\r\n    if (node.data && node.data.directives) {\r\n      const match = node.data.directives.filter(v => v.name === 'model');\r\n      if (match.length) {\r\n        foundVnode = node;\r\n      }\r\n    }\r\n  });\r\n  return foundVnode;\r\n}\r\n","import { validators } from '../validators';\r\nimport { getVModelNode, vModelValue } from '../util';\r\n\r\nexport function compareChanges(data, oldData) {\r\n  let hasChanged = false;\r\n  const attrs = data.attrs || {};\r\n  const oldAttrs = oldData.attrs || {};\r\n  const out = {};\r\n\r\n  if (vModelValue(data) !== vModelValue(oldData)) {\r\n    out.vModel = true; //vModelValue(data);\r\n    hasChanged = true;\r\n  }\r\n\r\n  Object.keys(validators).forEach((validator) => {\r\n    if (attrs[validator] !== oldAttrs[validator]) {\r\n      out[validator] = true; //attrs[validator];\r\n      hasChanged = true;\r\n    }\r\n  });\r\n\r\n  if (hasChanged) {\r\n    return out;\r\n  }\r\n}\r\n\r\nexport default {\r\n  name: 'vue-form-validator',\r\n  bind(el, binding, vnode) {\r\n    const fieldstate = binding.value;\r\n    const attrs = (vnode.data.attrs || {});\r\n    const inputName = attrs.name;\r\n\r\n    if (!inputName) {\r\n      console.warn('vue-form: name attribute missing');\r\n      return;\r\n    }\r\n\r\n    Object.keys(attrs).forEach((attr) => {\r\n      let prop;\r\n      if (attr === 'type') {\r\n        prop = attrs[attr];\r\n      } else {\r\n        prop = attr;\r\n      }\r\n      if (validators[prop]) {\r\n        fieldstate._validators[prop] = validators[prop];\r\n      }\r\n    });\r\n\r\n    fieldstate._validate(vnode);\r\n\r\n    el.addEventListener('blur', () => {\r\n      fieldstate._setTouched();\r\n    }, false);\r\n    el.addEventListener('focus', () => {\r\n      fieldstate._setFocused();\r\n    }, false);\r\n  },\r\n\r\n  update(el, binding, vnode, oldVNode) {\r\n    const changes = compareChanges(vnode.data, oldVNode.data);\r\n    const name = (vnode.data.attrs || {}).name;\r\n    const fieldstate = binding.value;\r\n\r\n    if (!changes) {\r\n      return;\r\n    }\r\n\r\n    if (changes.vModel) {\r\n      if (fieldstate._hasFocused) {\r\n        fieldstate._setDirty();\r\n      }\r\n      fieldstate._validate(vnode);\r\n    } else {\r\n      // attributes have changed\r\n      // loop through them and re-validate changed ones\r\n      //console.log(name, 'some attribute rules has changed');\r\n      fieldstate._validate(vnode);\r\n    }\r\n\r\n  }\r\n}\r\n","import { config } from '../config';\r\nimport { getVModelNode, vModelValue, addClass, removeClass } from '../util';\r\nimport { validators } from '../validators';\r\n\r\nexport default {\r\n  render(h) {\r\n    let foundVnode = getVModelNode(this.$slots.default);\r\n    if (foundVnode) {\r\n      this.name = foundVnode.data.attrs.name;\r\n      foundVnode.data.directives.push({ name: 'vue-form-validator', value: this.fieldstate });\r\n      foundVnode.data.attrs['vue-form-validator'] = '';\r\n    } else {\r\n      console.warn('Element with v-model not found');\r\n    }\r\n    return h(this.tag, { 'class': this.className.map(v => 'container-' + v) }, this.$slots.default);\r\n  },\r\n  props: {\r\n    state: Object,\r\n    tag: {\r\n      type: String,\r\n      default: 'span'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      name: '',\r\n      formstate: {},\r\n      fieldstate: {}\r\n    };\r\n  },\r\n  computed: {\r\n    className() {\r\n      const out = [];\r\n      if (this.fieldstate.$dirty) {\r\n        out.push(config.dirtyClass);\r\n      } else {\r\n        out.push(config.pristineClass)\r\n      }\r\n      if (this.fieldstate.$valid) {\r\n        out.push(config.validClass);\r\n      } else {\r\n        out.push(config.invalidClass)\r\n      }\r\n      if (this.fieldstate.$touched) {\r\n        out.push(config.touchedClass);\r\n      } else {\r\n        out.push(config.untouchedClass)\r\n      }\r\n\r\n      Object.keys(this.fieldstate.$error).forEach((error) => {\r\n        out.push(config.invalidClass + '-' + error);\r\n      });\r\n\r\n      return out;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fieldstate.$name = this.name;\r\n    this.formstate = this.state || this.$parent.state;\r\n    this.formstate._addControl(this.fieldstate);\r\n\r\n    const vModelEl = this.$el.querySelector('[vue-form-validator]');\r\n\r\n    // add classes to the input element\r\n    this.$watch('className', (value, oldValue) => {\r\n      if (oldValue) {\r\n        oldValue.forEach(v => removeClass(vModelEl, v));\r\n      }\r\n      value.forEach(v => addClass(vModelEl, v));\r\n    }, {\r\n      deep: true,\r\n      immediate: true\r\n    });\r\n\r\n  },\r\n  created() {\r\n    const vm = this;\r\n    this.fieldstate = {\r\n      $name: '',\r\n      $dirty: false,\r\n      $pristine: true,\r\n      $valid: true,\r\n      $invalid: false,\r\n      $touched: false,\r\n      $untouched: true,\r\n      $error: {},\r\n      _setValidatorVadility(validator, isValid) {\r\n        if (isValid) {\r\n          vm.$delete(this.$error, validator);\r\n        } else {\r\n          vm.$set(this.$error, validator, true);\r\n        }\r\n      },\r\n      _setVadility(isValid) {\r\n        this.$valid = isValid;\r\n        this.$invalid = !isValid;\r\n      },\r\n      _setDirty() {\r\n        this.$dirty = true;\r\n        this.$pristine = false;\r\n      },\r\n      _setPristine() {\r\n        this.$dirty = false;\r\n        this.$pristine = true;\r\n      },\r\n      _setTouched() {\r\n        this.$touched = true;\r\n        this.$untouched = false;\r\n      },\r\n      _setUntouched() {\r\n        this.$touched = false;\r\n        this.$untouched = true;\r\n      },\r\n      _setFocused() {\r\n        this._hasFocused = true;\r\n      },\r\n      _hasFocused: false,\r\n      _validators: {},\r\n      _validate(vnode) {\r\n        let isValid = true;\r\n        let value = vModelValue(vnode.data);\r\n        const attrs = (vnode.data.attrs || {});\r\n\r\n        Object.keys(this._validators).forEach((validator) => {\r\n\r\n          if (validator !== 'required' && !value && typeof value !== 'number') {\r\n            this._setValidatorVadility(validator, true);\r\n            return;\r\n          }\r\n\r\n          if (!validators[validator](value, attrs[validator], vnode)) {\r\n            isValid = false;\r\n            this._setValidatorVadility(validator, false);\r\n          } else {\r\n            this._setValidatorVadility(validator, true);\r\n          }\r\n        });\r\n\r\n        this._setVadility(isValid);\r\n        return isValid;\r\n      }\r\n    }\r\n  },\r\n  destroyed () {\r\n    this.formstate._removeControl(this.fieldstate);\r\n    console.log('destroyed')\r\n  }\r\n};\r\n","import { config } from './config';\r\nimport formErrors from './components/form-errors';\r\nimport formError from './components/form-error';\r\nimport vueForm from './components/vue-form';\r\nimport vueFormValidator from './directives/vue-form-validator';\r\nimport validate from './components/validate';\r\n\r\nexport default {\r\n  install(Vue) {\r\n    Vue.component(config.formComponent, vueForm);\r\n    Vue.component(config.validateComponent, validate);\r\n    Vue.component(config.errorsComponent, formErrors);\r\n    Vue.component(config.errorComponent, formError);\r\n    Vue.directive('vue-form-validator', vueFormValidator);\r\n  }\r\n};\r\n\r\n//https://plnkr.co/edit/yfUBrLH3v29RmMCnsnlo?p=preview\r\n"],"names":["config","h","children","field","formstate","$error","keys","forEach","key","push","$slots","tag","Object","String","errorsTag","state","$parent","error","default","errorTag","emailRegExp","urlRegExp","validators","model","value","vnode","test","isNaN","Array","isArray","length","pattern","patternRegExp","RegExp","min","max","event","$emit","className","controls","ctrl","$name","$set","$delete","$watch","isDirty","isValid","isTouched","control","$dirty","$touched","$valid","$pristine","$untouched","$invalid","out","dirtyClass","pristineClass","validClass","invalidClass","touchedClass","untouchedClass","join","addClass","el","classList","add","removeClass","remove","replace","split","vModelValue","data","directives","filter","v","name","getVModelNode","nodes","foundVnode","vModelNode","node","match","compareChanges","oldData","hasChanged","attrs","oldAttrs","vModel","validator","binding","fieldstate","inputName","warn","attr","prop","_validators","_validate","addEventListener","_setTouched","_setFocused","oldVNode","changes","_hasFocused","_setDirty","map","_addControl","vModelEl","$el","querySelector","oldValue","vm","_setValidatorVadility","_setVadility","_removeControl","log","Vue","component","formComponent","vueForm","validateComponent","validate","errorsComponent","formErrors","errorComponent","formError","directive","vueFormValidator"],"mappings":"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"}